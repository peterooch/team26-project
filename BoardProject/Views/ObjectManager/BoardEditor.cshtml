@model Board
@inject Localizer locale
@{
    ViewData["Title"] = locale["Board Editor"];
    ViewData["CustomScript"] = "/js/draggable.js";
}
<script>
    function AddTile(tileid, bg_color, tile_text, image_src, image_name) {
        var tile_container = document.querySelector(".tile_container");
        var outerdiv = document.createElement("DIV");
        outerdiv.style.padding = "@Model.Spacing.ToString()%";
        var innerdiv = document.createElement("DIV");
        innerdiv.className = "tiles";
        innerdiv.id = tileid;
        innerdiv.style.backgroundColor = "#" + bg_color;
        var image_text = document.createTextNode(tile_text);
        innerdiv.appendChild(image_text);
        var edit = document.createElement("IMG");
        edit.src = "/images/edit.png";
        edit.onclick = function (e) {
            EditTile(e.target.parentElement.id);
        };;
        innerdiv.appendChild(edit);
        var del = document.createElement("IMG");
        del.src = "/images/delete.png";
        del.onclick = function (e) {
            RemoveTile(e.target.parentElement.id);
        };
        innerdiv.appendChild(del);
        innerdiv.appendChild(document.createElement("BR"));
        var img = document.createElement("IMG");
        img.src = image_src;
        img.alt = image_name;
        img.style.width = "15vw";
        img.style.height = "26.25vh";
        innerdiv.appendChild(img);
        outerdiv.appendChild(innerdiv);
        tile_container.appendChild(outerdiv);
    }
    function RemoveTile(tileid) {
        document.getElementById(tileid).parentElement.remove();
    }
</script>
<div class="input-group mb-3">
    <!-- General Board information such as namings and styling -->
    <div class="input-group-prepend">
        <span class="input-group-text">@locale["Board Name"]</span>
    </div>
    <input type="text" name="board_name" class="form-control" value="@Model.BoardName" />
    <div class="input-group-prepend">
        <span class="input-group-text">@locale["Board Header"]</span>
    </div>
    <input type="text" name="board_header" class="form-control" value="@Model.BoardHeader" />
    <div class="input-group-prepend">
        <span class="input-group-text">@locale["Background Color"]</span>
    </div>
    <input type="text" name="bg_color" class="jscolor form-control" value="@Model.BackgroundColor.ToString("X6")" />
    <div class="input-group-prepend">
        <span class="input-group-text">@locale["Text Color"]</span>
    </div>
    <input type="text" name="bg_color" class="jscolor form-control" value="@Model.TextColor.ToString("X6")" />
    <div class="input-group-prepend">
        <span class="input-group-text">@locale["Font Size"]</span>
    </div>
    <input type="number" name="font_size" class="form-control" value="@Model.FontSize.ToString()" />
    <div class="input-group-prepend">
        <span class="input-group-text">@locale["Spacing"]</span>
    </div>
    <input type="number" name="spacing" class="form-control" value="@Model.Spacing.ToString()" />
</div>
<div class="tile_container" style="color: #@Model.TextColor.ToString("x6"); background-color: #@Model.BackgroundColor.ToString("x6");">
    @foreach (Tile tile in Model.Tiles)
    {
        <div style="padding: @Model.Spacing.ToString() %;">
            <div class="tiles" id="@tile.ID" style="background-color: #@tile.BackgroundColor.ToString("X6");">
                @tile.TileText <img src="~/images/edit.png" /><img src="~/images/delete.png" onclick="RemoveTile('@tile.ID');"/><br />
                <img src="@tile.Source.Source" alt="@tile.Source.ImageName" style="width: 15vw; height:26.25vh" />
            </div>
        </div>
    }
</div>
<script>
    const container = document.querySelector('.tile_container');

    const swappable = new Draggable.Swappable(container, {
        draggable: '.tiles',
    });

    swappable.on('swappable:start', () => console.log('swappable:start'));
    swappable.on('swappable:swapped', () => console.log('swappable:swapped'));
    swappable.on('swappable:stop', () => console.log('swappable:stop'));
</script>